<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>

<head>
    <style type="text/css">
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        
        #map {
            height: 100%;
            width: 100%;
        }
		
		#slider_div {
			position: absolute; 
			z-index: 99; 
			top: 85%;
			left: 10%;
			background-color: white;
			width: 80%!important;
		}
		
		#slider-range label {
			position: absolute;
			width: 20px;
			margin-left: -10px;
			text-align: center;
			margin-top: 20px;
		}
		
		#search_div {
			position: absolute;
			z-index: 99;
			top: 0;
			left: 85%;
			width: 50px;
			background-color: white;
		}
		
		#legend_div img {
			width: 15px;
			height: 15px;
		}
		
		#legend_div {
			position: absolute;
			z-index: 99;
			top: 10%;
			left: 0;
			width: 60px;
			background-color: white;
		}

		/* below is not necessary, just for style */
		#slider-range {
			width: 80%!important;
			margin: 2em auto;
		}
		
		#chart_div {
			width: 350px;
		}
		
		ul.tabs{
			margin: 0px;
			padding: 0px;
			list-style: none;
		}
		ul.tabs li{
			background: blue;
			color: #222;
			display: inline-block;
			padding: 10px 15px;
			cursor: pointer;
		}

		ul.tabs li.current{
			background: white;
			color: #222;
		}

		.tab-content{
			display: none;
			background: white;
			padding: 15px;
		}

		.tab-content.current{
			display: inherit;
			position: absolute;
			z-index: 99;
			top:25%;
			left: 70%;
		}
		
		#tabs_div {
			position: absolute;
			z-index: 99;
			top: 20%;
			left:70%;
		}
		
		#table_div {
			height: 300px;
			width: 350px;
		}
		
		#mergebtn {
			height: 50px;
			width: 50px;
		}
		
    </style>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        // Load the Visualization API and the piechart package.
    </script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<link rel="stylesheet" href="\jquery-ui-1.11.4.custom\jquery-ui.css">
	<script src="\jquery-ui-1.11.4.custom\external\jquery\jquery.js"></script>
	<script src="\jquery-ui-1.11.4.custom\jquery-ui.js"></script>
    <title>iPuno</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="flatfiles/jquerycsv.js"></script>
</head>

<body>
	<ul class="tabs" id="tabs_div">
		<li class="tab-link current" data-tab="tab-1">Trends</li>
		<li class="tab-link" data-tab="tab-2">Tree Inventory</li>
		<li class="tab-link" data-tab="tab-3">Compare Trends</li>
	</ul>
	<div id="tab-1" class="tab-content current">
		<div id="radio_div">
			<form onchange="initMap('x');">
			  <input type="radio" name="chart" value="SR" checked>Survival Rate<br>
			  <input type="radio" name="chart" value="MR">Maturity Rate<br>
			  <input type="radio" name="chart" value="GR">Growth Rate
			</form> 
			
			<input type='checkbox' id='isHeat' onchange='initMap("heatmap", this.checked);'>HeatMap
		</div>
		<div id="chart_div"></div>
	</div>
	<div id="tab-2" class="tab-content">
		<input type="checkbox" id='isHeat2' onchange='checkRadio(this.checked);'>Heat Map
		<div id="filter_div"></div>
		<div id="table_div"></div>
	</div>
	
	<div id="tab-3" class="tab-content">
		<form onchange='changeCompare();'>
		  <input type="radio" name="comparecat" value="SR" checked>Survival Rate<br>
		  <input type="radio" name="comparecat" value="MR">Maturity Rate<br>
		  <input type="radio" name="comparecat" value="GR">Growth Rate
		</form> 
		
		<select id = "search_area" onchange = "changeCategory(this.value);">
				<option value = "Province">Province</option>
				<option value = "Barangay">Barangay</option>
				<option value = "Cenro">Cenro</option>
				<option value = "Components">Components</option>
				<option value = "Commodities">Commodities</option>
				<option value = "MunicipalityorCity">Municipality or City</option>
				<option value = "Org Name">Org Name</option>
				<option value = "Penro">Penro</option>
				<option value = "Species">Species</option>
				<option value = "TypeofOrganization">Type of Organization</option>
				<option value = "Watershed">Watershed</option>			
				<option value = "River Basin">River Basin</option>
		</select>	
		
		<div id = "area1">
			<input type="text" id ="val_area1"></input>
			<button id ="searchbtn1" onclick="search1();">Search</button>
			<div id="chart1"></div>
		</div>
		
		<img id = 'mergebtn' src='flatfiles/merge.png'/>
		
		<div id = "area2">
			<input type="text" id ="val_area2"></input>
			<button id ="searchbtn2" onclick="search2();">Search</button>
			<div id="chart2"></div>
		</div>
	</div>
    <div id="map"></div>
    <div id="buttons"></div>
    <div id="lots"></div>
    <div id="info_div"></div>
	<div id="legend_div">
		<p> Map Legend </p>
		<img src ='colors/orange.png'/> 2011
		<img src ='colors/blue.png'/> 2012
		<img src ='colors/pink.png'/> 2013
		<img src ='colors/yellow.png'/> 2014
		<img src ='colors/white.png'/> 2015
	</div>
	
    <div id="slider_div">
        <div id="slider-range" style="width: 50%;"></div>
        <button type="button" id="animatebtn">Play</button>
    </div>
	
	<div id="search_div">
		<p>Search: </p>
		<select id = "search_choices" onchange='updateSearch(this.value);'>
			<option value = "Province">Province</option>
			<option value = "Barangay">Barangay</option>
			<option value = "Cenro">Cenro</option>
			<option value = "Components">Components</option>
			<option value = "Commodities">Commodities</option>
			<option value = "MunicipalityorCity">Municipality or City</option>
			<option value = "Org Name">Org Name</option>
			<option value = "Penro">Penro</option>
			<option value = "Species">Species</option>
			<option value = "TypeofOrganization">Type of Organization</option>
			<option value = "Watershed">Watershed</option>			
			<option value = "River Basin">River Basin</option>
		</select>
		
		<input type="text" id ="search_val"></input>
		<button id ="searchbtn" onclick="search();">Search</button>
	</div>
    <script type="text/javascript">
        var dummark = {};
        var markers = {};
        var treestats = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        var polygons = {};
        var polycoords = {};
        var coords = {};
        var currentid;
        var intervals = [];
        var polycount = parseFloat(0);
        var counter = parseFloat(0);
        var attributes = {};
        var attribsPool = [];
		var treesArray = {};
		
		var comparecategory = "Province";
		var searchvalue1 = "";
		var searchvalue2 = "";
		var searchvalue = "";
		
		var total2011 = 0;
		var total2012 = 0;
		var total2013 = 0;
		var total2014 = 0;
		var total2015 = 0;
		
		var count2011 = 0;
		var count2012 = 0;
		var count2013 = 0;
		var count2014 = 0;
		var count2015 = 0;
		
		var stats2011 = 0;
		var stats2012 = 0;
		var stats2013 = 0;
		var stats2014 = 0;
		var stats2015 = 0;
		
		var total2011a = 0;
		var total2012a = 0;
		var total2013a = 0;
		var total2014a = 0;
		var total2015a = 0;
		
		var count2011a = 0;
		var count2012a = 0;
		var count2013a = 0;
		var count2014a = 0;
		var count2015a = 0;
		
		var stats2011a = 0;
		var stats2012a = 0;
		var stats2013a = 0;
		var stats2014a = 0;
		var stats2015a = 0;
		
		var total2011b = 0;
		var total2012b = 0;
		var total2013b = 0;
		var total2014b = 0;
		var total2015b = 0;
		
		var count2011b = 0;
		var count2012b = 0;
		var count2013b = 0;
		var count2014b = 0;
		var count2015b = 0;
		
		var stats2011b = 0;
		var stats2012b = 0;
		var stats2013b = 0;
		var stats2014b = 0;
		var stats2015b = 0;
		
        var regions = []; //
        var districts = []; //
        var cenros = []; //
        var penros = []; //
        var barangays = [];
        var muni_citys = []; //
        var provinces = []; //
        var name_orgs = [];
        var cont_persArr = [];
        var type_orgs = []; //
        var components = []; //
        var commodities = [];
        var speciesArr = [];
        var years = []; //
        var zones = []; //
        var tenures = [];
        var no_loas = [];
        var riv_basins = []; //
        var watersheds = []; //
        var remarksArr = [];
        var yr_cds = [];
        var site_ids = [];
        var area_cds = [];
        var uniq_ids = [];
        var psgc_cds = [];
        var areas = [];
        var area_gens = [];
		var opt;
		var value0;
		var value1;
		
		var paused = false;
		var stopped = true;
		var oV2;
		var cV2;
		var dynamicsearch = [];
		
		$("#slider-range").slider({
			range: true,
			min: 2011,
			max: 2015,
			values: [2011, 2015],
			animate: "medium",
			step: 1,
			slide: function(event, ui) {
				$("#amount").val(ui.values[0] + " - " + ui.values[1]);
				paused = false;
				stopped = true;
				value0 = ui.values[0];
				value1 = ui.values[1];
				initMap(ui.values);
			}
		}).each(function() {
			opt = $(this).data().uiSlider.options;
			var vals = opt.max - opt.min;
			for (var i = 0; i <= vals; i++) {
				var el = $('<label>' + (opt.min + i) + '</label>').css('left', (i / vals * 100) + '%');
				$("#slider-range").append(el);
			}

			$("#animatebtn").click(function() {
				value0 = opt.values[0];
				value1 = opt.values[1];
				var diff = value1 - value0;
				if (paused && !stopped) {
					var ct = (oV2 - cV2 - 4) * -1;
					diff = oV2 - value0;
					animate(diff, value0, ct);
					paused = false;
					stopped = false;
				} else {
					oV2 = value1;
					animate(diff, value0, 0);
				}

			});

			$("#pausebtn").click(function() {
				paused = true;
				stopped = false;
				cV2 = opt.values[1];
			});

			function animate(diff, v0, counter) {
				var interval = 1000;
				if (paused) {
					interval = 0;
				}
				setTimeout(function() {
					var v1 = v0 + (counter);
					counter++;
					if (counter <= diff + 1 && !paused) {
						$("#slider-range").slider('values', [v0, v1]);
						value1 = v1;
						initMap($("#slider-range").data().uiSlider.options.values);
						animate(diff, v0, counter);
					}

					if (counter > diff + 1) {
						stopped = true;
						paused = false;
					}
				}, interval);
			}

		});

		$("#amount").val($("#slider-range").slider("values", 0) +
			" - " + $("#slider-range").slider("values", 1));
        
        function attribs(shapeID, region, district, cenro, penro,
            barangay, muni_city, province, name_org, cont_pers, type_org,
            component, commodity, species, year, zone, tenure, no_loa,
            riv_basin, watershed, remarks, yr_cd, site_id, area_cd,
            uniq_id, psgc_id, area, area_gen, survival_rate, maturity_rate,
			growth_rate) {
            this.shapeID = shapeID;
            this.region = region;
            this.district = district;
            this.cenro = cenro;
            this.penro = penro;
            this.barangay = barangay;
            this.muni_city = muni_city;
            this.province = province;
            this.name_org = name_org;
            this.cont_pers = cont_pers;
            this.type_org = type_org;
            this.component = component;
            this.species = species;
            this.year = year;
            this.zone = zone;
            this.tenure = tenure;
            this.no_loa = no_loa;
            this.riv_basin = riv_basin;
            this.watershed = watershed;
            this.remarks = remarks;
            this.yr_cd = yr_cd;
            this.site_id = site_id;
            this.area_cd = area_cd;
            this.uniq_id = uniq_id;
            this.psgc_id = psgc_id;
            this.area = area;
            this.area_gen = area_gen;
            this.polyAttrib = {};
			this.isSet = true;
			this.survival_rate = survival_rate;
			this.maturity_rate = maturity_rate;
			this.growth_rate = growth_rate;
			this.treesInventory = {};
        }
		
		function treeObj(treeArray) {
			this.treeArray = treeArray;
		}

        function initMap(toggled, isHeat) {
			$('ul.tabs li').click(function(){
				var tab_id = $(this).attr('data-tab');

				$('ul.tabs li').removeClass('current');
				$('.tab-content').removeClass('current');

				$(this).addClass('current');
				$("#"+tab_id).addClass('current');
			});
			
			function drawArea1() {
				var data = google.visualization.arrayToDataTable([
					['Year', 'Rate'],
					['2011', 0],
					['2012', 0],
					['2013', 0],
					['2014', 0],
					['2015', 0]
				]);
			
				var options = {
				  title: 'No search yet.'
				};
				
				var chart = new google.visualization.LineChart(document.getElementById('chart1'));
				chart.draw(data, options);
			}
			
			function drawArea2() {
				var data = google.visualization.arrayToDataTable([
					['Year', 'Rate'],
					['2011', 0],
					['2012', 0],
					['2013', 0],
					['2014', 0],
					['2015', 0]
				]);
			
				var options = {
				  title: 'No search yet.'
				};
				
				var chart = new google.visualization.LineChart(document.getElementById('chart2'));
				chart.draw(data, options);
			}
			
			function drawChart(data, titleCombo) {
				var options = {
				  title: titleCombo,
				  legend: { position: 'bottom' }
				};

				var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

				chart.draw(data, options);
			}
			
			function drawInventory(data, titleCombo) {

				var dashboard = new google.visualization.Dashboard(document.getElementById('tab-2'));
				
				var filterForString = new google.visualization.ControlWrapper({
				  'controlType': 'StringFilter',
				  'containerId': 'filter_div',
				  'options': {
					'filterColumnLabel': 'Tree Specie'
				  }
				});

				var table = new google.visualization.ChartWrapper({
				  'chartType': 'Table',
				  'containerId': 'table_div',
				  'options': {
					width: 350,
					height: 300,
					showRowNumber: true,
					allowHtml: true
				  }
				});

				dashboard.bind(filterForString, table);
				dashboard.draw(data);
			}
			
            if (toggled) {
				var searchchoice = document.getElementById('search_choices').value;
				chartcat = $('input[name=chart]:radio:checked').val();
				
				stats2011 = 0;
				stats2012 = 0;
				stats2013 = 0;
				stats2014 = 0;
				stats2015 = 0;
				
				total2011 = 0;
				total2012 = 0;
				total2013 = 0;
				total2014 = 0;
				total2015 = 0; 
				
				count2011 = 0;
				count2012 = 0;
				count2013 = 0;
				count2014 = 0;
				count2015 = 0;
				
				var toBeRemoved = [];
				var toBeAdded = [];
				
				var yearsSelected = [];
				var yearsNotSelected = [];
				
				for(var i = value0; i <= value1; i++) {
					yearsSelected.push(i);
				}
				
				for(var i = (value0 - 1); i >= 2011; i--) {
					yearsNotSelected.push(i);
				}
				
				for(var i = (value1 + 1); i <= 2015; i++) {
					yearsNotSelected.push(i);
				}
				
				chartcat = $('input[name=chart]:radio:checked').val();
				if(document.getElementById('isHeat').checked) {
					if(chartcat == "SR") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(attribsPool[i].survival_rate > 85) {
								attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'yellow', strokeColor: 'yellow'});
							} else {
								attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'red', strokeColor: 'red'});
							}
						}
						updateLegend("SR");
					} else if(chartcat == "MR") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(attribsPool[i].maturity_rate > 50) {
								attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'yellow', strokeColor: 'yellow'});
							} else {
								attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'red', strokeColor: 'red'});
							}
						}
						updateLegend("MR");
					} else if(chartcat == "GR") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(attribsPool[i].growth_rate > 30) {
								attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'yellow', strokeColor: 'yellow'});
							} else {
								attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'red', strokeColor: 'red'});
							}
						}
						updateLegend("GR");
					}
				} else {
					for(var i = 0; i < attribsPool.length; i++) {
						if (attribsPool[i].year == 2011) {
							attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'orange', strokeColor: 'orange'});
						} else if(attribsPool[i].year == 2012) {
							attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'blue', strokeColor: 'blue'});
						} else if(attribsPool[i].year == 2013) {
							attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'pink', strokeColor: 'pink'});
						} else if(attribsPool[i].year == 2014) {
							attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'yellow', strokeColor: 'yellow'});
						} else if(attribsPool[i].year == 2015) {
							attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'white', strokeColor: 'white'});
						}
					}
					updateLegend("Normal");
				}
				
				treesArray = {};
				
				if(searchvalue == "") {
					for(var i = 0; i < attribsPool.length; i++) {
						if (yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
							for(var key in attribsPool[i].treesInventory) {
								if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
									if(treesArray[key]) {
										treesArray[key] += attribsPool[i].treesInventory[key];
									} else {
										treesArray[key] = attribsPool[i].treesInventory[key];
									}
								}
							}
							if(attribsPool[i].year == 2011) {
								count2011 += 1;
								if(chartcat == "SR") {
									total2011 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2011 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2011 +=  attribsPool[i].growth_rate;
								}
							} else if(attribsPool[i].year == 2012) {
								count2012 += 1;
								if(chartcat == "SR") {
									total2012 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2012 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2012 +=  attribsPool[i].growth_rate;
								}
							} else if(attribsPool[i].year == 2013) {
								count2013 += 1;
								if(chartcat == "SR") {
									total2013 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2013 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2013 +=  attribsPool[i].growth_rate;
								}
							} else if(attribsPool[i].year == 2014) {
								count2014 += 1;
								if(chartcat == "SR") {
									total2014 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2014 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2014 +=  attribsPool[i].growth_rate;
								}
							} else if(attribsPool[i].year == 2015) {
								count2015 += 1;
								if(chartcat == "SR") {
									total2015 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2015 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2015 +=  attribsPool[i].growth_rate;
								}
							}
						} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == false) {
							for(var key in attribsPool[i].treesInventory) {
								if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
									if(treesArray[key]) {
										treesArray[key] += attribsPool[i].treesInventory[key];
									} else {
										treesArray[key] = attribsPool[i].treesInventory[key];
									}
								}
							}
							attribsPool[i].isSet = true;
							toBeAdded.push(attribsPool[i].polyAttrib);
							if(attribsPool[i].year == 2011) {
								count2011 += 1;
								if(chartcat == "SR") {
									total2011 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2011 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2011 +=  attribsPool[i].growth_rate;
								}
							} else if(attribsPool[i].year == 2012) {
								count2012 += 1;
								if(chartcat == "SR") {
									total2012 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2012 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2012 +=  attribsPool[i].growth_rate;
								}
							} else if(attribsPool[i].year == 2013) {
								count2013 += 1;
								if(chartcat == "SR") {
									total2013 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2013 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2013 +=  attribsPool[i].growth_rate;
								}
							} else if(attribsPool[i].year == 2014) {
								count2014 += 1;
								if(chartcat == "SR") {
									total2014 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2014 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2014 +=  attribsPool[i].growth_rate;
								}
							} else if(attribsPool[i].year == 2015) {
								count2015 += 1;
								if(chartcat == "SR") {
									total2015 +=  attribsPool[i].survival_rate;
								} else if(chartcat == "MR") {
									total2015 +=  attribsPool[i].maturity_rate;
								} else if(chartcat == "GR") {
									total2015 +=  attribsPool[i].growth_rate;
								}
							}
						} else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
							attribsPool[i].isSet = false;
							toBeRemoved.push(attribsPool[i].polyAttrib);
						}
					}
				} else {
					console.log(searchchoice + " - " + searchvalue);
					if(searchchoice == "Org Name") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].name_org == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							}else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].name_org == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
								if(attribsPool[i].year == 2011) {
								count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].name_org != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					} else if(searchchoice == "Watershed") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].watershed == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].watershed == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].watershed != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					} else if(searchchoice == "River Basin") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].riv_basin == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].riv_basin == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].riv_basin != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					}  else if(searchchoice == "Barangay") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].barangay == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].barangay == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
								count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
								
								
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].barangay != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					} else if(searchchoice == "Province") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].province == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].province == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].province != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					} else if(searchchoice == "Cenro") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].cenro == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].cenro == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].cenro != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					} else if(searchchoice == "Penro") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].penro == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].penro == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].penro != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					} else if(searchchoice == "Components") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].component == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].component == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].component != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					} else if(searchchoice == "Commodities") {
						for(var i = 0; i < attribsPool.length; i++) {
							if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].commodity == searchvalue && attribsPool[i].isSet == true) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].commodity == searchvalue && attribsPool[i].isSet == false) {
								for(var key in attribsPool[i].treesInventory) {
									if(attribsPool[i].treesInventory.hasOwnProperty(key)) {
										if(treesArray[key]) {
											treesArray[key] += attribsPool[i].treesInventory[key];
										} else {
											treesArray[key] = attribsPool[i].treesInventory[key];
										}
									}
								}
								if(attribsPool[i].year == 2011) {
									count2011 += 1;
									if(chartcat == "SR") {
										total2011 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2011 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2011 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2012) {
									count2012 += 1;
									if(chartcat == "SR") {
										total2012 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2012 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2012 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2013) {
									count2013 += 1;
									if(chartcat == "SR") {
										total2013 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2013 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2013 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2014) {
									count2014 += 1;
									if(chartcat == "SR") {
										total2014 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2014 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2014 +=  attribsPool[i].growth_rate;
									}
								} else if(attribsPool[i].year == 2015) {
									count2015 += 1;
									if(chartcat == "SR") {
										total2015 +=  attribsPool[i].survival_rate;
									} else if(chartcat == "MR") {
										total2015 +=  attribsPool[i].maturity_rate;
									} else if(chartcat == "GR") {
										total2015 +=  attribsPool[i].growth_rate;
									}
								}
								attribsPool[i].isSet = true;
								toBeAdded.push(attribsPool[i].polyAttrib);
							} else if(yearsSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].commodity != searchvalue && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}else if(yearsNotSelected.indexOf(parseInt(attribsPool[i].year)) > -1 && attribsPool[i].isSet == true) {
								attribsPool[i].isSet = false;
								toBeRemoved.push(attribsPool[i].polyAttrib);
							}
						}
					}
				}
				
				if(chartcat == "SR") {
					legend = "Survival Rate";
				} else if(chartcat == "MR") {
					legend = "Maturity Rate";
				} else if(chartcat == "GR") {
					legend = "Growth Rate";
				}
				
				var arrayData = [];
				arrayData[0] = [];
				arrayData[0].push('Year');
				arrayData[0].push(legend);
				
				stats2011 = total2011/count2011;
				stats2012 = total2012/count2012;
				stats2013 = total2013/count2013;
				stats2014 = total2014/count2014;
				stats2015 = total2015/count2015;
				
				for(var i = 0; i < yearsSelected.length; i++) {
					arrayData[i+1] = [];
					arrayData[i+1].push(yearsSelected[i] + "");
					if(yearsSelected[i] == 2011) {
						arrayData[i+1].push(stats2011);
					} else if(yearsSelected[i] == 2012) {
						arrayData[i+1].push(stats2012);
					} else if(yearsSelected[i] == 2013) {
						arrayData[i+1].push(stats2013);
					} else if(yearsSelected[i] == 2014) {
						arrayData[i+1].push(stats2014);
					} else if(yearsSelected[i] == 2015) {
						arrayData[i+1].push(stats2015);
					}
				}
				
				var titleString = "";
				if(searchvalue == "") {
					titleString = legend + " for years " + yearsSelected[0] + " - " + yearsSelected[yearsSelected.length-1]; 
				} else {
					titleString = legend + " for years " + yearsSelected[0] + " - " + yearsSelected[yearsSelected.length-1] + "\n" + searchchoice + " : " + searchvalue;;
				}
				var data = google.visualization.arrayToDataTable(arrayData);
				drawChart(data, titleString);
				
				var arrayData = [];
				arrayData[0] = [];
				arrayData[0].push('Tree Specie');
				arrayData[0].push('Quantity');
				arrayData[0].push('Heatmap Button');
				var i = 0;
				for (var key in treesArray) {
				  if (treesArray.hasOwnProperty(key)) {
					i++;
					arrayData[i] = [];
					arrayData[i].push(key);
					arrayData[i].push(treesArray[key]);
					
					arrayData[i].push("<input type='radio' class ='heatmapbtn' name='heatmap' value='"+ key + "' onchange='check(this.value);'/>");
					
				  }
				}
				titleString = "Tree Inventory for trees planted in 2011 - 2015";
				
				var data2 = google.visualization.arrayToDataTable(arrayData);
				
				drawInventory(data2, titleString);
				
				if(toBeAdded.length > 0) {
					for(var i = 0; i < toBeAdded.length; i++) {
						toBeAdded[i].setMap(map);
					}
				}
				
				if(toBeRemoved.length > 0) {
					for(var i = 0; i < toBeRemoved.length; i++) {
						toBeRemoved[i].setMap(null);
					}
				}
            } else {
                map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 9,
                    center: {
                        lat: 16.52023885,
                        lng: 120.8456877
                    },
                    mapTypeId: google.maps.MapTypeId.SATELLITE
                });

                $.ajax({
                    url: "flatfiles/nodes.csv",
                    async: false,
                    success: function(poly) {
                        coords = $.csv.toArrays(poly);
                    },
                    dataType: "text",
                    complete: function() {
                        // call a function on complete 
                    }
                });

                $.ajax({
                    url: "flatfiles/temp-attributes.csv",
                    async: false,
                    success: function(attribs) {
                        attributes = $.csv.toArrays(attribs);
                    },
                    dataType: "text",
                    complete: function() {

                    }
                });

                for (var i = 2; i < attributes.length; i += 2) {
                    var information = attributes[i] + "";

                    var checkinf = information.split(",");

                    if (regions.indexOf(checkinf[1]) < 0) {
                        regions.push(checkinf[1]);
                    }

                    if (districts.indexOf(checkinf[2]) < 0) {
                        districts.push(checkinf[2]);
                    }

                    if (cenros.indexOf(checkinf[3]) < 0) {
                        cenros.push(checkinf[3]);
                    }

                    if (penros.indexOf(checkinf[4]) < 0) {
                        penros.push(checkinf[4]);
                    }

                    if (barangays.indexOf(checkinf[5]) < 0) {
                        barangays.push(checkinf[5]);
                    }

                    if (muni_citys.indexOf(checkinf[6]) < 0) {
                        muni_citys.push(checkinf[6]);
                    }

                    if (provinces.indexOf(checkinf[7]) < 0) {
                        provinces.push(checkinf[7]);
                    }

                    if (name_orgs.indexOf(checkinf[8]) < 0) {
                        name_orgs.push(checkinf[8]);
                    }

                    if (cont_persArr.indexOf(checkinf[9]) < 0) {
                        cont_persArr.push(checkinf[9]);
                    }

                    if (type_orgs.indexOf(checkinf[10]) < 0) {
                        type_orgs.push(checkinf[10]);
                    }

                    if (components.indexOf(checkinf[11]) < 0) {
                        components.push(checkinf[11]);
                    }

                    if (commodities.indexOf(checkinf[12]) < 0) {
                        commodities.push(checkinf[12]);
                    }

                    if (speciesArr.indexOf(checkinf[13]) < 0) {
                        speciesArr.push(checkinf[13]);
                    }

                    if (years.indexOf(checkinf[14]) < 0) {
                        years.push(checkinf[14]);
                    }

                    if (zones.indexOf(checkinf[15]) < 0) {
                        zones.push(checkinf[15]);
                    }

                    if (tenures.indexOf(checkinf[16]) < 0) {
                        tenures.push(checkinf[16]);
                    }

                    if (no_loas.indexOf(checkinf[17]) < 0) {
                        no_loas.push(checkinf[17]);
                    }

                    if (riv_basins.indexOf(checkinf[18]) < 0) {
                        riv_basins.push(checkinf[18]);
                    }

                    if (watersheds.indexOf(checkinf[19]) < 0) {
                        watersheds.push(checkinf[19]);
                    }

                    if (remarksArr.indexOf(checkinf[20]) < 0) {
                        remarksArr.push(checkinf[20]);
                    }

                    if (yr_cds.indexOf(checkinf[21]) < 0) {
                        yr_cds.push(checkinf[21]);
                    }

                    if (site_ids.indexOf(checkinf[22]) < 0) {
                        site_ids.push(checkinf[22]);
                    }

                    if (area_cds.indexOf(checkinf[23]) < 0) {
                        area_cds.push(checkinf[23]);
                    }

                    if (uniq_ids.indexOf(checkinf[24]) < 0) {
                        uniq_ids.push(checkinf[24]);
                    }

                    if (psgc_cds.indexOf(checkinf[25]) < 0) {
                        psgc_cds.push(checkinf[25]);
                    }

                    if (areas.indexOf(checkinf[26]) < 0) {
                        areas.push(checkinf[26]);
                    }

                    if (area_gens.indexOf(checkinf[27]) < 0) {
                        area_gens.push(checkinf[27]);
                    }

                    var x = new attribs(checkinf[0], checkinf[1], checkinf[2], checkinf[3],
                        checkinf[4], checkinf[5], checkinf[6], checkinf[7],
                        checkinf[8], checkinf[9], checkinf[10], checkinf[11],
                        checkinf[12], checkinf[13], checkinf[14], checkinf[15],
                        checkinf[16], checkinf[17], checkinf[18], checkinf[19],
                        checkinf[20], checkinf[21], checkinf[22], checkinf[23],
                        checkinf[24], checkinf[25], checkinf[26], checkinf[27],
						Math.floor((Math.random() * 100) + 1), Math.floor((Math.random() * 100) + 1),
						Math.floor((Math.random() * 100) + 1));
                    attribsPool.push(x);

                }
				
				dynamicsearch = provinces;
				
                $.ajax({
                    url: "flatfiles/nodes.csv",
                    async: false,
                    success: function(poly) {
                        coords = $.csv.toArrays(poly);
                    },
                    dataType: "text",
                    complete: function() {
                        // call a function on complete 
                    }
                });

                for (var i = 1; i < coords.length; i++) {
                    var information = coords[i] + "";
                    var checkinf = information.split(",");
                    if (i === 1) {
                        currentid = checkinf[0];
                    } else if (i !== 1) {
                        if (currentid !== checkinf[0]) {
                            currentid = checkinf[0];
                            intervals.push(i - 1);
                        }
                    }
                }

                console.log("intervals: " + intervals.length);

                polycoords[counter] = new google.maps.MVCArray();

                for (var i = 1; i < coords.length; i++) {
                    var information = coords[i] + "";
                    var checkinf = information.split(",");
                    if (intervals.indexOf(i) > -1) {
                        polygons[counter] = new google.maps.Polygon({
                            paths: polycoords[counter],
                            strokeColor: 'yellow',
                            strokeOpacity: 0.8,
                            strokeWeight: 1,
                            fillColor: 'yellow',
                            fillOpacity: 0.35
                        });

                        addListeners(polygons[counter], counter);

                        polygons[counter].setMap(map);
                        counter++;
                        polycoords[counter] = new google.maps.MVCArray();

                    } else {
                        var point = new google.maps.LatLng(parseFloat(checkinf[2]), parseFloat(checkinf[1]));
                        polycoords[counter].insertAt(polycoords[counter].length, point);
                    }
                }

                function addListeners(polygon, id) {
					if(id < 7419) {
						var treeSpecies = attribsPool[id].species.split('+');
						
						var treeString = "";
						
						var treesArray2 = {};
						for(var i = 0; i < treeSpecies.length; i++) {
							var numTrees = Math.floor((Math.random() * 100) + 1);
							
							if(treesArray[treeSpecies[i].trim().toLowerCase()]) {
								treesArray[treeSpecies[i].trim().toLowerCase()] += numTrees;
							} else {
								treesArray[treeSpecies[i].trim().toLowerCase()] = numTrees;
							}
							treeString += treeSpecies[i] + ": " + numTrees + "</br>";
							
							
							treesArray2[treeSpecies[i].trim().toLowerCase()] = numTrees;
							attribsPool[id].treesInventory = treesArray2;
						}
					}
					
                    polygons[counter].addListener('click', function(e) {
                        var location = e.latLng;
                        var iWindow = new google.maps.InfoWindow();
                        iWindow.setContent
						('Area Informaton<br/> Area: ' + attribsPool[id].area + '<br/> Barangay: ' + attribsPool[id].barangay + '<br/> Component: ' + attribsPool[id].component + '<br/> Contact Person: ' + attribsPool[id].cont_pers + '<br/> District: ' + attribsPool[id].district + '<br/> Municipality/City: ' + attribsPool[id].muni_city + '<br/> PO: ' + attribsPool[id].name_org + ' <br/> ShapeID: ' + attribsPool[id].shapeID + '<br/> Tenure: ' + attribsPool[id].tenure + '<hr/> Tree Statistics <br/>' + treeString);
                        iWindow.setPosition(location);
                        iWindow.open(map);
                    });
					
					if(attribsPool[id]) {
						if (attribsPool[id].year == 2011) {
							polygon.setOptions({strokeWeight: 1, fillColor: 'orange', strokeColor: 'orange'});
							total2011 += attribsPool[id].survival_rate;
							count2011 += 1;
						} else if(attribsPool[id].year == 2012) {
							polygon.setOptions({strokeWeight: 1, fillColor: 'blue', strokeColor: 'blue'});
							total2012 += attribsPool[id].survival_rate;
							count2012 += 1;
						} else if(attribsPool[id].year == 2013) {
							polygon.setOptions({strokeWeight: 1, fillColor: 'pink', strokeColor: 'pink'});
							total2013 += attribsPool[id].survival_rate;
							count2013 += 1;
						} else if(attribsPool[id].year == 2014) {
							polygon.setOptions({strokeWeight: 1, fillColor: 'yellow', strokeColor: 'yellow'});
							total2014 += attribsPool[id].survival_rate;
							count2014 += 1;
						} else if(attribsPool[id].year == 2015) {
							polygon.setOptions({strokeWeight: 1, fillColor: 'white', strokeColor: 'white'});
							total2015 += attribsPool[id].survival_rate;
							count2015 += 1;
						}
						attribsPool[id].polyAttrib = polygon;
					}
                }
				
				value0 = parseInt(years[0]);
				value1 = years[years.length - 1];
				stats2011 = total2011/count2011;
				stats2012 = total2012/count2012;
				stats2013 = total2013/count2013;
				stats2014 = total2014/count2014;
				stats2015 = total2015/count2015;
				var data = google.visualization.arrayToDataTable([
				  ['Year', 'Survival Rate'],
				  ['2011',  stats2011],
				  ['2012',  stats2012],
				  ['2013',  stats2013],
				  ['2014',  stats2014],
				  ['2015', stats2015]
				]);
				drawChart(data, "Survival Rate for years 2011 - 2015.");
				
				var arrayData = [];
				arrayData[0] = [];
				arrayData[0].push('Tree Specie');
				arrayData[0].push('Quantity');
				arrayData[0].push('Heatmap Button');
				var i = 0;
				for (var key in treesArray) {
				  if (treesArray.hasOwnProperty(key)) {
					i++;
					arrayData[i] = [];
					arrayData[i].push(key);
					arrayData[i].push(treesArray[key]);
					
					arrayData[i].push("<input type='radio' class ='heatmapbtn' name='heatmap' value='"+ key + "' onchange='check(this.value);'/>");
					
				  }
				}
				titleString = "Tree Inventory for trees planted in 2011 - 2015";
				
				var data2 = google.visualization.arrayToDataTable(arrayData);
				
				drawInventory(data2, titleString);
				
				drawArea1();
				drawArea2();
				autocompleteSearch = provinces;
				$( "#val_area1" ).autocomplete({
				  source: function(request, response) {
					var results = $.ui.autocomplete.filter(autocompleteSearch, request.term);
					response(results.slice(0, 5));
				  }
				});
				
				$("#val_area2" ).autocomplete({
				  source: function(request, response) {
					var results = $.ui.autocomplete.filter(autocompleteSearch, request.term);
					response(results.slice(0, 5));
				  }
				});
            }
			
			$( "#search_val" ).autocomplete({
			  source: function(request, response) {
				var results = $.ui.autocomplete.filter(dynamicsearch, request.term);
				response(results.slice(0, 5));
			  }
			});
        }
		
		function changeCategory(value) {
			searchvalue1 = "";
			searchvalue2 = "";
			//autocompleteSearch = [];
			if(value == "Province") {
				autocompleteSearch = provinces;
			} else if(value == "Barangay") {
				autocompleteSearch = barangays;
			} else if(value == "Cenro") {
				autocompleteSearch = cenros;
			} else if(value == "Components") {
				autocompleteSearch = components;
			} else if(value == "MunicipalityorCity") {
				autocompleteSearch = muni_citys;
			} else if(value == "Org Name") {
				autocompleteSearch = name_orgs;
			} else if(value == "Penro") {
				autocompleteSearch = penros;
			} else if(value == "Species") {
				autocompleteSearch = speciesArr;
			} else if(value == "TypeofOrganization") {
				autocompleteSearch = type_orgs;
			} else if(value == "Watershed") {
				autocompleteSearch = watersheds;
			} else if(value == "River Basin") {
				autocompleteSearch = riv_basins;
			}
			comparecategory = value;
			$( "#val_area1" ).autocomplete({
			  source: function(request, response) {
				var results = $.ui.autocomplete.filter(autocompleteSearch, request.term);
				response(results.slice(0, 5));
			  }
			});
			
			$("#val_area2" ).autocomplete({
			  source: function(request, response) {
				var results = $.ui.autocomplete.filter(autocompleteSearch, request.term);
				response(results.slice(0, 5));
			  }
			});
			drawArea1();
			drawArea2();
		}
		
		function drawArea1(convertArray, title) {
			if(convertArray, title) {
				var data = google.visualization.arrayToDataTable(convertArray);
				
				var options = {
					title: title,
					legend: { position: 'bottom' }
				}
				
				var chart = new google.visualization.LineChart(document.getElementById('chart1'));
				chart.draw(data, options);
			} else {
				var data = google.visualization.arrayToDataTable([
					['Year', 'Rate'],
					['2011', 0],
					['2012', 0],
					['2013', 0],
					['2014', 0],
					['2015', 0]
				]);
				
				var options = {
				  title: 'No search yet.'
				};
				
				var chart = new google.visualization.LineChart(document.getElementById('chart1'));
				chart.draw(data, options);
			}
		}
			
		function drawArea2(convertArray, title) {
			if(convertArray, title) {
				var data = google.visualization.arrayToDataTable(convertArray);
				
				var options = {
					title: title,
					legend: { position: 'bottom' }
				}
				
				var chart = new google.visualization.LineChart(document.getElementById('chart2'));
				chart.draw(data, options);
			} else {
				var data = google.visualization.arrayToDataTable([
					['Year', 'Rate'],
					['2011', 0],
					['2012', 0],
					['2013', 0],
					['2014', 0],
					['2015', 0]
				]);
				
				var options = {
				  title: 'No search yet.'
				};
				
				var chart = new google.visualization.LineChart(document.getElementById('chart2'));
				chart.draw(data, options);
			}
		}
		
		function search1(changeChart) {
			chartcat = $('input[name=comparecat]:radio:checked').val();
			if(changeChart) {
			
			} else {
				searchvalue1 = document.getElementById('val_area1').value;
			}
			var searchchoice = document.getElementById('search_area').value;
			
			total2011a = 0;
			total2012a = 0;
			total2013a = 0;
			total2014a = 0;
			total2015a = 0;
			
			count2011a = 0;
			count2012a = 0;
			count2013a = 0;
			count2014a = 0;
			count2015a = 0;
			
			stats2011a = 0;
			stats2012a = 0;
			stats2013a = 0;
			stats2014a = 0;
			stats2015a = 0;
			
			if(searchchoice == "Province") {
				for(var i = 0; i < attribsPool.length; i++) {
					if(attribsPool[i].province == searchvalue1) {
						if(attribsPool[i].year == 2011) {
							count2011a += 1;
							if(chartcat == "SR") {
								total2011a +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2011a +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2011a +=  attribsPool[i].growth_rate;
							}
						} else if(attribsPool[i].year == 2012) {
							count2012a += 1;
							if(chartcat == "SR") {
								total2012a +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2012a +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2012a +=  attribsPool[i].growth_rate;
							}
						} else if(attribsPool[i].year == 2013) {
							count2013a += 1;
							if(chartcat == "SR") {
								total2013a +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2013a +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2013a +=  attribsPool[i].growth_rate;
							}
						} else if(attribsPool[i].year == 2014) {
							count2014a += 1;
							if(chartcat == "SR") {
								total2014a +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2014a +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2014a +=  attribsPool[i].growth_rate;
							}
						} else if(attribsPool[i].year == 2015) {
							count2015a += 1;
							if(chartcat == "SR") {
								total2015a +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2015a +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2015a +=  attribsPool[i].growth_rate;
							}
						}
					}
				}
			}
			
			if(chartcat == "SR") {
				legend = "Survival Rate";
			} else if(chartcat == "MR") {
				legend = "Maturity Rate";
			} else if(chartcat == "GR") {
				legend = "Growth Rate";
			}
			
			var arrayData = [[],[],[],[],[],[]];
			arrayData[0] = [];
			arrayData[0].push('Year');
			arrayData[0].push(legend);
			
			stats2011a = total2011a/count2011a;
			stats2012a = total2012a/count2012a;
			stats2013a = total2013a/count2013a;
			stats2014a = total2014a/count2014a;
			stats2015a = total2015a/count2015a;
			
			
			arrayData[1].push('2011');
			arrayData[1].push(stats2011a);
			arrayData[2].push('2012');
			arrayData[2].push(stats2012a);
			arrayData[3].push('2013');
			arrayData[3].push(stats2013a);
			arrayData[4].push('2014');
			arrayData[4].push(stats2014a);
			arrayData[5].push('2015');
			arrayData[5].push(stats2015a);
			
			var titleString = legend + " for years 2011 - 2015 " + "\n" + searchchoice + ": " + searchvalue1;
			drawArea1(arrayData, titleString);
		}
		
		function search2(changeChart) {
			chartcat = $('input[name=comparecat]:radio:checked').val();
			if(changeChart) {
			
			} else {
				searchvalue2 = document.getElementById('val_area2').value;
			}
			var searchchoice = document.getElementById('search_area').value;
			
			total2011b = 0;
			total2012b = 0;
			total2013b = 0;
			total2014b = 0;
			total2015b = 0;
			
			count2011b = 0;
			count2012b = 0;
			count2013b = 0;
			count2014b = 0;
			count2015b = 0;
			
			stats2011b = 0;
			stats2012b = 0;
			stats2013b = 0;
			stats2014b = 0;
			stats2015b = 0;
			
			if(searchchoice == "Province") {
				for(var i = 0; i < attribsPool.length; i++) {
					if(attribsPool[i].province == searchvalue2) {
						if(attribsPool[i].year == 2011) {
							count2011b += 1;
							if(chartcat == "SR") {
								total2011b +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2011b +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2011b +=  attribsPool[i].growth_rate;
							}
						} else if(attribsPool[i].year == 2012) {
							count2012b += 1;
							if(chartcat == "SR") {
								total2012b +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2012b +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2012b +=  attribsPool[i].growth_rate;
							}
						} else if(attribsPool[i].year == 2013) {
							count2013b += 1;
							if(chartcat == "SR") {
								total2013b +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2013b +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2013b +=  attribsPool[i].growth_rate;
							}
						} else if(attribsPool[i].year == 2014) {
							count2014b += 1;
							if(chartcat == "SR") {
								total2014b +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2014b +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2014b +=  attribsPool[i].growth_rate;
							}
						} else if(attribsPool[i].year == 2015) {
							count2015b += 1;
							if(chartcat == "SR") {
								total2015b +=  attribsPool[i].survival_rate;
							} else if(chartcat == "MR") {
								total2015b +=  attribsPool[i].maturity_rate;
							} else if(chartcat == "GR") {
								total2015b +=  attribsPool[i].growth_rate;
							}
						}
					}
				}
			}
			
			if(chartcat == "SR") {
				legend = "Survival Rate";
			} else if(chartcat == "MR") {
				legend = "Maturity Rate";
			} else if(chartcat == "GR") {
				legend = "Growth Rate";
			}
			
			var arrayData = [[],[],[],[],[],[]];
			arrayData[0] = [];
			arrayData[0].push('Year');
			arrayData[0].push(legend);
			
			stats2011b = total2011b/count2011b;
			stats2012b = total2012b/count2012b;
			stats2013b = total2013b/count2013b;
			stats2014b = total2014b/count2014b;
			stats2015b = total2015b/count2015b;
			
			
			arrayData[1].push('2011');
			arrayData[1].push(stats2011b);
			arrayData[2].push('2012');
			arrayData[2].push(stats2012b);
			arrayData[3].push('2013');
			arrayData[3].push(stats2013b);
			arrayData[4].push('2014');
			arrayData[4].push(stats2014b);
			arrayData[5].push('2015');
			arrayData[5].push(stats2015b);
			
			var titleString = legend + " for years 2011 - 2015 " + "\n" + searchchoice + ": " + searchvalue2;
			drawArea2(arrayData, titleString);
		}
		
		function updateLegend(updateValue) {
			if(updateValue == "Normal") {
				document.getElementById('legend_div').innerHTML = "<p> Map Legend </p>";
				document.getElementById('legend_div').innerHTML += "<img src = 'colors/orange.png/> 2011";
				document.getElementById('legend_div').innerHTML += "<img src ='colors/blue.png'/> 2012";
				document.getElementById('legend_div').innerHTML += "<img src ='colors/pink.png'/> 2013";
				document.getElementById('legend_div').innerHTML += "<img src ='colors/yellow.png'/> 2014";
				document.getElementById('legend_div').innerHTML += "<img src ='colors/white.png'/> 2015";
			} else if(updateValue == "SR") {
				document.getElementById('legend_div').innerHTML = "<p> Map Legend </p>";
				document.getElementById('legend_div').innerHTML += "<img src ='colors/yellow.png'/> Greater than 85%<hr/>";
				document.getElementById('legend_div').innerHTML += "<img src ='colors/red.png'/> 85% below ";
			} else if(updateValue == "MR") {
				document.getElementById('legend_div').innerHTML = "<p> Map Legend </p>";
				document.getElementById('legend_div').innerHTML += "<img src = 'colors/yellow.png'/> Greater than 50%<hr/>";
				document.getElementById('legend_div').innerHTML += "<img src ='colors/red.png'/> 50% below ";
			} else if(updateValue == "GR") {
				document.getElementById('legend_div').innerHTML = "<p> Map Legend </p>";
				document.getElementById('legend_div').innerHTML += "<img src = 'colors/yellow.png'/> Greater than 30%<hr/>";
				document.getElementById('legend_div').innerHTML += "<img src ='colors/red.png'/> 30% below ";
			}
			
		}
		
		function check(value) {
			if(document.getElementById('isHeat2').checked) {
				for(var i = 0; i < attribsPool.length; i++) {
					if(attribsPool[i].treesInventory[value]) {
						if(attribsPool[i].treesInventory[value] > 50) {
							attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'yellow', strokeColor: 'yellow'});
						} else {
							attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'red', strokeColor: 'red'});
						}
					} else {
						attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'black', strokeColor: 'black'}); 
					}
				}
			}
		}
		
		function changeCompare() {
			search1('x');
			search2('x');
		}
		
		function updateSearch(choice) {
			if(choice == "Province") {
				dynamicsearch = provinces;
			} else if(choice == "Barangay") {
				dynamicsearch = barangays;
			} else if(choice == "Cenro") {
				dynamicsearch = cenros;
			} else if(choice == "Components") {
				dynamicsearch = components;
			} else if(choice == "MunicipalityorCity") {
				dynamicsearch = muni_citys;
			} else if(choice == "Org Name") {
				dynamicsearch = name_orgs;
			} else if(choice == "Penro") {
				dynamicsearch = penros;
			} else if(choice == "Species") {
				dynamicsearch = speciesArr;
			} else if(choice == "TypeofOrganization") {
				dynamicsearch = type_orgs;
			} else if(choice == "Watershed") {
				dynamicsearch = watersheds;
			} else if(choice == "River Basin") {
				dynamicsearch = riv_basins;
			}
			
			$( "#search_val" ).autocomplete({
			  source: function(request, response) {
				var results = $.ui.autocomplete.filter(dynamicsearch, request.term);
				response(results.slice(0, 5));
			  }
			});
		}
		
		function search() {
			searchvalue = document.getElementById('search_val').value;
			initMap("searchtoggle");
		}
		
		function checkRadio(checked) {
			if(checked) {
				value = $("input[name='heatmap']:checked").val();
				if(value) {
					for(var i = 0; i < attribsPool.length; i++) {
						if(attribsPool[i].treesInventory[value]) {
							if(attribsPool[i].treesInventory[value] > 50) {
								attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'yellow', strokeColor: 'yellow'});
							} else {
								attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'red', strokeColor: 'red'});
							}
						} else {
							attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'black', strokeColor: 'black'}); 
						}
					}
				}
			} else {
				for(var i = 0; i < attribsPool.length; i++) {
					if (attribsPool[i].year == 2011) {
						attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'orange', strokeColor: 'orange'});
					} else if(attribsPool[i].year == 2012) {
						attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'blue', strokeColor: 'blue'});
					} else if(attribsPool[i].year == 2013) {
						attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'pink', strokeColor: 'pink'});
					} else if(attribsPool[i].year == 2014) {
						attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'yellow', strokeColor: 'yellow'});
					} else if(attribsPool[i].year == 2015) {
						attribsPool[i].polyAttrib.setOptions({strokeWeight: 1, fillColor: 'white', strokeColor: 'white'});
					}
				}
			}
		}
		google.load('visualization', '1.0', {'packages':['corechart', 'table', 'controls']});
    </script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAyGBTdSmKQ2wq_L0QhV6fZcOLWIO2IbXs&callback=initMap"></script>
</body>
</html>